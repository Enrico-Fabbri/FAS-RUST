name: Update Docs

on:
    push:
        branches:
            - main # Adjust branch name as needed

jobs:
    update_docs:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout Repository
              uses: actions/checkout@v2

            - name: Build and Generate Documentation
              run: cargo doc --no-deps

            - name: Clone Wiki Repository
              uses: actions/checkout@v2
              with:
                  repository: Enrico-Fabbri/FAS-RUST.wiki
                  path: wiki

            - name: Copy Documentation to Wiki
              run: cp -r target/doc/* wiki/

            - name: Commit and Push Changes
              working-directory: wiki
              run: |
                  git config user.email "actions@github.com"
                  git config user.name "GitHub Actions"
                  git add .
                  git commit -m "Update documentation"
                  git push https://$GITHUB_TOKEN@github.com/Enrico-Fabbri/FAS-RUST.wiki.git HEAD:main
